<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}BudgetWise{% endblock %}</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent:#0b66c3;--muted:#6b7280;--radius:12px}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, Roboto, Arial;background:var(--bg);color:#12202b}
    .wrap{max-width:1100px;margin:18px auto;padding:18px}
    .card{background:var(--card);border-radius:12px;padding:14px;margin-bottom:14px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
    nav a{margin-left:8px;color:var(--accent);text-decoration:none;font-weight:600}
    .muted{color:var(--muted);font-size:13px}
    .flash{padding:10px;border-radius:8px;margin-bottom:12px}
    .flash.success{background:#ecfdf5;color:#065f46}
    .flash.danger{background:#fff1f2;color:#9f1239}
  </style>
</head>
<body>
  <div class="wrap">
    <header style="display:flex;justify-content:space-between;align-items:center">
      <div style="display:flex;gap:12px;align-items:center">
        <div style="background:linear-gradient(180deg,var(--accent),#2e9bf0);color:white;padding:10px;border-radius:8px;font-weight:700">
          BudgetWise
        </div>
        <div>
          <div style="font-weight:700">BudgetWise — Expense Forecast</div>
          <div class="muted">AI insights • Visual reports</div>
        </div>
      </div>
      <nav>
        {% if session.logged_in %}
          <span class="muted">Hi, {{ session.username }}</span>
          <a href="{{ url_for('index') }}">Home</a>
          <a href="{{ url_for('dashboard') }}">Dashboard</a>
          <a href="{{ url_for('add_expense') }}">Add Expense</a>
          <a href="{{ url_for('upload_dataset') }}">Upload CSV</a>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a href="{{ url_for('login') }}">Login</a>
          <a href="{{ url_for('register') }}">Register</a>
        {% endif %}
      </nav>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="flash {{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}

    <footer style="text-align:center;margin-top:18px;color:var(--muted);font-size:13px;">
      © BudgetWise • Built with Pandas • scikit-learn • Matplotlib • Seaborn
    </footer>
  </div>
</body>
</html>
